# 이벤트 위임이란 무엇이며, JavaScript에서 어떻게 작동하는지?

- 이벤트 위임 이란, 부모 요소에 이벤트 리스너를 설정하고, 자식 요소의 이벤트를 부모가 처리하도록 위임하는 기법입니다. 이 방식은 이벤트 버블링 원리를 활용하여, 동적으로 추가된 요소에도 이벤트를 적용할 수 있도록 합니다.

## JavaScript에서 어떻게 작동하는지

JavaScript에서 이벤트는 기본적으로 캡처링 → 타겟 단계 → 버블링 순서로 동작합니다.

이벤트 위임은 버블링 단계를 이용하여, 이벤트 리스너를 특정 요소에 직접 추가하는 것이 아니라 공통된 부모 요소에 이벤트 리스너를 추가한 후, event.target을 사용하여 실제 이벤트가 발생한 요소를 식별하는 방식입니다.

## 장단점

- 장점

1. 메모리 효율성 → 여러 개의 요소마다 이벤트 리스너를 추가하는 것보다 하나의 리스너만 사용하므로 메모리 사용량 감소.
2. 동적으로 생성된 요소에도 자동 적용 → 나중에 추가되는 요소에도 이벤트 리스너를 따로 추가할 필요 없음.
3. 코드 간결화 → 이벤트 핸들러를 한 곳에서 관리할 수 있음.

- 단점

1. 이벤트가 버블링되지 않는 경우에는 사용할 수 없음
   `focus`, `blur`, `mouseenter`, `mouseleave` 같은 이벤트는 버블링되지 않으므로 이벤트 위임이 불가능함.

## 이벤트 제어 메서드

1. event.preventDefault()

- 브라우저의 기본 동작을 취소하는 메서드입니다.
- 브라우저의 기본 동작

  `<a>` 태그는 클릭 시 href에 설정된 URL로 이동.
  `<form>` 요소는 submit 시 기본적으로 페이지를 새로고침.
  `<input type="checkbox">`는 클릭 시 체크 상태 변경.

- 일부 브라우저에서는 특정 보안상의 이유로 `preventDefault()`가 무시될 수 있음.

```js
// passive를 true로 설정하면 preventDefault 가 동작하지 않습니다.
/*
 * 명시하지 않을 경우의 기본 값은 false지만, Safari와 Internet Explorer를 제외한 브라우저에서 wheel, mousewheel, touchstart, touchmove 이벤트에서의 기본 값은 true입니다.
 */
target.addEventListener(type, callback, { passive: true });
```

2. event.stopPropagation()

- 이벤트가 부모 요소로 전파(버블링 또는 캡처링)되는 것을 막는 메서드입니다.

3. event.stopImmediatePropagation()

- 이벤트 전파뿐만 아니라 같은 요소의 동일한 타입의 나머지 이벤트 핸들러 실행도 중단함.

## 🚫 `preventDefault()`가 무시될 수 있는 주요 사례

| 사례                                  | `preventDefault()`가 무시되는 이유 | 해결 방법                                      |
| ------------------------------------- | ---------------------------------- | ---------------------------------------------- |
| **모바일 `touchmove` 이벤트**         | `passive: true`가 기본값           | `{ passive: false }` 설정                      |
| **`Ctrl+S`, `Ctrl+P` 등 단축키 차단** | 브라우저 보안 정책                 | 100% 차단 불가, 사용자 지정 단축키 시스템 사용 |
| **`<input>` 필드에서 엔터 입력 차단** | 브라우저의 기본 UX 보호            | `submit` 이벤트 차단 방식으로 변경             |
| **파일 드래그 앤 드롭 차단**          | 일부 보안 정책 적용                | `dragover`와 `drop` 이벤트 모두 차단           |
| **`window.open()` 자동 실행**         | 사용자의 명확한 액션이 없음        | 클릭 이벤트 내에서 실행                        |

---
