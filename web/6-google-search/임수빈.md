사용자가 주소창에 google.com을 입력하면, 브라우저는 이를 컴퓨터가 이해할 수 있는 IP 주소로 변환하기 위해 DNS 조회를 수행한다.
변환된 IP 주소를 이용해 브라우저는 구글 서버와 TCP 연결(TCP 3-Way Handshake)을 수행하며, 보안이 필요한 경우 TLS Handshake를 통해 안전한 연결을 확립한다.
연결이 완료되면, 브라우저는 구글 서버에 HTTP 요청을 보내고, 서버는 응답으로 HTML, CSS, JavaScript 파일을 반환한다.
브라우저는 받은 파일을 해석하여 DOM, CSSOM을 생성하고 JavaScript를 실행한 후, 화면에 렌더링(Rendering)하여 최종적으로 웹페이지를 표시한다.

🔍 TCP 3-Way Handshake (연결 과정) 1️⃣ 클라이언트(브라우저)가 서버에게 SYN 패킷을 보냄 (연결 요청)
2️⃣ 서버가 SYN-ACK 패킷을 응답 (연결 수락)
3️⃣ 클라이언트가 ACK를 보냄 (연결 완료)

이제 브라우저와 구글 서버는 데이터를 주고받을 준비가 됨!

🔍 TLS Handshake (보안 연결 과정, HTTPS의 핵심) 1️⃣ 클라이언트가 서버에 Hello 메시지를 보내면서 지원하는 암호화 방식(예: TLS 1.3, AES 등)을 전달
2️⃣ 서버가 암호화에 사용할 인증서(SSL/TLS 인증서)를 전달
3️⃣ 클라이언트가 이 인증서를 검증하고, 대칭 키를 생성하여 안전한 통신을 시작

<hr/>

2️⃣ "TCP 3-Way Handshake 과정에서 패킷 손실이 발생하면 어떻게 되나요?"
📌 면접관이 확인하려는 것:

TCP 연결 과정에서 네트워크 문제가 생길 경우 해결 방법을 알고 있는가?
📌 답변 방향:
TCP는 신뢰성을 보장하는 프로토콜이므로, 패킷 손실이 발생하면 **자동 재전송(Timeout & Retransmission)**이 일어납니다.

SYN 패킷이 손실되면? → 일정 시간이 지나도 응답이 없으면 브라우저가 재전송
SYN-ACK이 손실되면? → 서버가 클라이언트의 재요청을 기다렸다가 다시 응답
일정 횟수 이상 실패하면? → Connection Timeout 오류 발생
📌 추가 질문 가능성:

"TCP 대신 UDP를 사용하면 어떻게 달라지나요?" → UDP는 패킷 손실 시 재전송 없이 그냥 지나감 (ex. 실시간 스트리밍)
"TCP가 느릴 때 HTTP/3은 어떻게 개선하나요?" → HTTP/3는 UDP 기반 QUIC 프로토콜을 사용하여 연결 속도를 향상

<hr/>
📌 2. 필요성 (Why)
사용자가 google.com과 같은 도메인 이름을 입력하는 이유는 사람이 숫자로 된 IP 주소를 직접 기억하기 어렵기 때문입니다. 도메인 네임 시스템(DNS)이 이를 해결해 사용자가 기억하기 쉬운 도메인명을 입력하면, 해당 도메인을 실제 서버의 IP 주소로 변환해 웹사이트에 접속할 수 있도록 합니다.

또한, 브라우저가 서버와 안전하고 효율적인 방식으로 통신하기 위해 여러 네트워크 프로토콜이 필요하며, HTTP(S) 프로토콜이 웹 콘텐츠를 가져오는 역할을 수행합니다.

📌 3. 동작 원리 (How)

1️⃣ 브라우저의 주소창 입력 & URL 해석

사용자가 google.com을 입력하면 브라우저는 이를 분석해 HTTP(S) 프로토콜을 사용할 것인지 결정합니다. (기본적으로 HTTPS를 우선 사용)
브라우저의 캐시나 OS의 호스트 파일을 확인하여 google.com에 대한 기존 IP 주소가 있는지 체크합니다.
2️⃣ DNS 조회 (Domain Name System Lookup)

로컬 DNS 캐시에 google.com의 IP 주소가 없으면, 브라우저는 DNS 서버에 도메인 이름을 IP 주소로 변환해 달라고 요청합니다.
DNS 서버는 여러 계층을 거쳐 최종적으로 Google의 IP 주소(예: 142.250.74.14 등)를 반환합니다.
3️⃣ TCP/IP 연결 (3-Way Handshake) & TLS 핸드셰이크

브라우저는 IP 주소를 통해 Google 서버와 TCP 연결을 수행하며, 이를 위해 3-way handshake 과정을 진행합니다.
연결 과정:
클라이언트(브라우저)가 서버에 SYN 패킷을 보냄
서버가 SYN-ACK 패킷으로 응답
클라이언트가 ACK를 보내면서 연결 확립
보안이 필요한 경우, TLS(SSL) 핸드셰이크도 함께 수행되어 데이터 암호화를 위한 키 교환이 이루어집니다.
4️⃣ HTTP(S) 요청 전송

TCP 연결이 완료되면, 브라우저는 google.com 서버에 HTTP 요청을 보냅니다.
기본적으로 GET / HTTP/1.1 요청이 전송되며, 요청 헤더에는 브라우저 정보, 쿠키, 세션 정보 등이 포함됩니다.
5️⃣ 웹 서버의 응답

Google 서버는 요청을 처리한 후, 응답을 반환합니다.
응답에는 HTML, CSS, JavaScript, 이미지 파일 등의 데이터가 포함되며, 브라우저는 이를 해석하여 화면을 구성합니다.
6️⃣ 브라우저의 렌더링 프로세스

받은 HTML을 DOM(Document Object Model)으로 변환
CSS를 해석하여 CSSOM(CSS Object Model)을 생성
JavaScript를 실행하여 동적 요소 처리
이미지, 동영상, 글꼴 등의 리소스를 다운로드 후 레이아웃 계산 및 페이지 렌더링
최종적으로 사용자 화면에 google.com의 완전한 웹 페이지가 표시됨.
📌 4. 결과 및 응용 (Impact & Use Cases)
✅ 빠른 웹사이트 접근: DNS 캐싱 및 CDN(Content Delivery Network) 활용을 통해 응답 속도를 개선
✅ 보안성 강화: TLS 암호화를 통해 HTTPS 연결을 기본적으로 사용하며, 개인정보 보호 강화
✅ 브라우저 최적화: 최신 브라우저들은 프리로드(Preloading), 프리페치(Prefetching) 등의 기술을 사용하여 더 빠른 웹 페이지 로딩 가능
✅ 네트워크 성능 개선: HTTP/2 및 HTTP/3을 통해 병렬 처리 및 헤더 압축을 최적화하여 성능 향상

📌 핵심 키워드

DNS 조회: 도메인 → IP 주소 변환
TCP 3-Way Handshake: 서버와 클라이언트 연결 과정
TLS Handshake: HTTPS 보안 연결
HTTP 요청 & 응답: 클라이언트-서버 간 데이터 교환
브라우저 렌더링: HTML, CSS, JS 해석 및 페이지 표시
